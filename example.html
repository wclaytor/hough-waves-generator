<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="">
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'%3E%3Ccircle cx='96' cy='96' r='80' fill='%233b82f6'/%3E%3Cpath d='M96 40 L140 90 L115 90 L115 120 L77 120 L77 90 L52 90 Z' fill='white'/%3E%3C/svg%3E" sizes="any" type="image/svg+xml">
    <title>Alpine.js Template - Starter Demo</title>
    
    <!-- Alpine.js for reactivity -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        if (typeof tailwind !== 'undefined') {
            tailwind.config = {
                darkMode: 'class'
            }
        }
    </script>
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    
    <!-- Marked.js for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked@11.0.0/marked.min.js"></script>
    
    <style>
        [x-cloak] { display: none !important; }
        
        /* Dark mode transitions */
        * {
            transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
        }
    </style>
</head>
<body>
    <div x-data="starterApp()" x-cloak :class="darkMode ? 'dark' : ''" class="min-h-screen bg-gray-50 dark:bg-gray-900 p-6 transition-colors duration-300">
        <div class="max-w-6xl mx-auto">
            <!-- Header -->
            <header class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6 transition-colors duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2">
                            <i class="bi bi-lightning-charge text-blue-500"></i>
                            Alpine.js Starter Demo
                        </h1>
                        <p class="text-gray-600 dark:text-gray-300">A comprehensive demonstration of Alpine.js core concepts</p>
                    </div>
                    <div class="flex items-center gap-4">
                        <div class="text-right">
                            <div class="text-sm text-gray-500 dark:text-gray-400">Active Tasks</div>
                            <div class="text-2xl font-bold text-blue-600 dark:text-blue-400" x-text="activeTasks"></div>
                        </div>
                        <button 
                            @click="toggleDarkMode()"
                            class="p-3 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-300 transition-all duration-200 border border-gray-300 dark:border-gray-600"
                            title="Toggle dark mode">
                            <i x-show="!darkMode" class="bi bi-moon text-xl"></i>
                            <i x-show="darkMode" class="bi bi-sun text-xl"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="mt-4 flex gap-2 flex-wrap">
                    <button @click="showModal = true" 
                            class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center gap-2 transition-colors duration-300">
                        <i class="bi bi-info-circle"></i>
                        About This Demo
                    </button>
                    <button @click="clearAllData" 
                            class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 flex items-center gap-2 transition-colors duration-300">
                        <i class="bi bi-trash"></i>
                        Clear All Data
                    </button>
                    <button @click="exportData" 
                            class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors duration-300">
                        <i class="bi bi-download"></i>
                        Export Data
                    </button>
                </div>
            </header>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Left Column -->
                <div class="space-y-6">
                    <!-- 1. Basic Reactivity & Forms -->
                    <section class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors duration-300">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2">
                            <i class="bi bi-1-circle text-blue-500"></i>
                            Basic Reactivity & Forms
                        </h2>
                        
                        <!-- Simple Input Example -->
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                Your Name (x-model)
                            </label>
                            <input x-model="userName" 
                                   type="text" 
                                   placeholder="Enter your name..."
                                   class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-300">
                            <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">
                                Hello, <span x-text="userName || 'Anonymous'" class="font-semibold text-gray-800 dark:text-gray-200"></span>! üëã
                            </p>
                        </div>

                        <!-- Form with Validation -->
                        <form @submit.prevent="addTask" class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                                    Add New Task
                                </label>
                                <input x-model="newTask.title" 
                                       type="text" 
                                       placeholder="Task title..."
                                       class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-300"
                                       :class="{'border-red-500': errors.title}">
                                <div x-show="errors.title" class="text-red-500 text-sm mt-1" x-text="errors.title"></div>
                            </div>
                            
                            <div>
                                <select x-model="newTask.priority" 
                                        class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-300">
                                    <option value="">Select Priority</option>
                                    <option value="high">High Priority</option>
                                    <option value="medium">Medium Priority</option>
                                    <option value="low">Low Priority</option>
                                </select>
                            </div>

                            <button type="submit" 
                                    class="w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center justify-center gap-2 transition-colors duration-300">
                                <i class="bi bi-plus-circle"></i>
                                Add Task
                            </button>
                        </form>
                    </section>

                    <!-- 2. Conditional Display -->
                    <section class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors duration-300">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2">
                            <i class="bi bi-2-circle text-green-500"></i>
                            Conditional Display (x-show, x-if)
                        </h2>
                        
                        <div class="space-y-4">
                            <div class="flex items-center gap-4">
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" x-model="showAdvanced" class="w-4 h-4 text-blue-500">
                                    <span class="text-gray-800 dark:text-gray-200">Show Advanced Options</span>
                                </label>
                            </div>

                            <!-- x-show example (element stays in DOM) -->
                            <div x-show="showAdvanced" 
                                 x-transition 
                                 class="p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg transition-colors duration-300">
                                <h4 class="font-semibold text-blue-800 dark:text-blue-300 mb-2">Advanced Settings (x-show)</h4>
                                <p class="text-sm text-blue-700 dark:text-blue-400">This content is shown/hidden with x-show and stays in the DOM.</p>
                                <button @click="copyToClipboard('Advanced settings accessed!')" 
                                        class="mt-2 px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600 transition-colors duration-300">
                                    Copy Status
                                </button>
                            </div>

                            <!-- x-if example (element removed from DOM) -->
                            <template x-if="tasks.length > 0">
                                <div class="p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg transition-colors duration-300">
                                    <h4 class="font-semibold text-green-800 dark:text-green-300 mb-2">Tasks Available (x-if)</h4>
                                    <p class="text-sm text-green-700 dark:text-green-400">
                                        This appears only when tasks exist and is completely removed from DOM when hidden.
                                    </p>
                                </div>
                            </template>

                            <template x-if="tasks.length === 0">
                                <div class="p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg transition-colors duration-300">
                                    <h4 class="font-semibold text-yellow-800 dark:text-yellow-300 mb-2">No Tasks Yet</h4>
                                    <p class="text-sm text-yellow-700 dark:text-yellow-400">Add your first task above to see the x-if directive in action!</p>
                                </div>
                            </template>
                        </div>
                    </section>

                    <!-- 3. File Upload -->
                    <section class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors duration-300">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2">
                            <i class="bi bi-3-circle text-purple-500"></i>
                            File Upload & Processing
                        </h2>
                        
                        <label class="flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-300">
                            <div class="flex flex-col items-center justify-center pt-5 pb-6">
                                <i class="bi bi-cloud-upload text-4xl text-gray-400 dark:text-gray-500 mb-3"></i>
                                <p class="mb-2 text-sm text-gray-700 dark:text-gray-300">
                                    <span class="font-semibold">Click to upload</span> or drag and drop
                                </p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">JSON files (task lists)</p>
                            </div>
                            <input type="file" 
                                   class="hidden" 
                                   accept=".json,.txt"
                                   @change="handleFileUpload($event)" />
                        </label>

                        <div x-show="uploadStatus" 
                             class="mt-4 p-3 rounded-lg transition-colors duration-300"
                             :class="uploadStatus.includes('Error') ? 'bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400' : 'bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-400'">
                            <p class="text-sm" x-text="uploadStatus"></p>
                        </div>
                    </section>
                </div>

                <!-- Right Column -->
                <div class="space-y-6">
                    <!-- 4. Lists & Loops with Computed Properties -->
                    <section class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors duration-300">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2">
                            <i class="bi bi-4-circle text-orange-500"></i>
                            Lists & Loops (x-for) + Computed Properties
                        </h2>

                        <!-- Filter Controls -->
                        <div class="mb-4">
                            <div class="flex gap-2 mb-3">
                                <button @click="filter = 'all'"
                                        :class="filter === 'all' ? 'bg-blue-500 text-white' : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300'"
                                        class="px-3 py-1 rounded-lg text-sm transition-colors duration-300">
                                    All (<span x-text="tasks.length"></span>)
                                </button>
                                <button @click="filter = 'pending'"
                                        :class="filter === 'pending' ? 'bg-blue-500 text-white' : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300'"
                                        class="px-3 py-1 rounded-lg text-sm transition-colors duration-300">
                                    Pending (<span x-text="activeTasks"></span>)
                                </button>
                                <button @click="filter = 'completed'"
                                        :class="filter === 'completed' ? 'bg-blue-500 text-white' : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300'"
                                        class="px-3 py-1 rounded-lg text-sm transition-colors duration-300">
                                    Done (<span x-text="completedTasks"></span>)
                                </button>
                            </div>

                            <input x-model="searchTerm" 
                                   type="text" 
                                   placeholder="Search tasks..."
                                   class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-300">
                        </div>

                        <!-- Task List (x-for loop) -->
                        <div class="space-y-2 max-h-64 overflow-y-auto">
                            <template x-for="task in filteredTasks" :key="task.id">
                                <div class="flex items-center gap-3 p-3 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-300"
                                     :class="task.completed ? 'bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800' : 'bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600'">
                                    <input type="checkbox" 
                                           x-model="task.completed" 
                                           @change="saveToStorage()"
                                           class="w-4 h-4 text-blue-500">
                                    
                                    <div class="flex-1">
                                        <span :class="{'line-through text-gray-400 dark:text-gray-500': task.completed}" 
                                              x-text="task.title"
                                              class="block font-medium text-gray-800 dark:text-gray-200"></span>
                                        <span class="text-xs text-gray-500 dark:text-gray-400" 
                                              x-text="task.priority + ' priority'"></span>
                                    </div>

                                    <span class="text-xs px-2 py-1 rounded-full"
                                          :class="{
                                              'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400': task.priority === 'high',
                                              'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400': task.priority === 'medium',
                                              'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400': task.priority === 'low'
                                          }"
                                          x-text="task.priority"></span>

                                    <button @click="removeTask(task.id)" 
                                            class="text-red-500 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 p-1 transition-colors duration-300">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </div>
                            </template>

                            <div x-show="filteredTasks.length === 0" 
                                 class="text-center py-8 text-gray-400 dark:text-gray-500">
                                <i class="bi bi-inbox text-3xl mb-2"></i>
                                <p>No tasks match your current filter</p>
                            </div>
                        </div>
                    </section>

                    <!-- 5. Statistics (Computed Properties) -->
                    <section class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors duration-300">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2">
                            <i class="bi bi-5-circle text-teal-500"></i>
                            Statistics (Computed Properties)
                        </h2>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div class="text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg transition-colors duration-300">
                                <div class="text-2xl font-bold text-blue-600 dark:text-blue-400" x-text="taskStats.total"></div>
                                <div class="text-sm text-blue-700 dark:text-blue-300">Total Tasks</div>
                            </div>
                            <div class="text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg transition-colors duration-300">
                                <div class="text-2xl font-bold text-green-600 dark:text-green-400" x-text="taskStats.completed"></div>
                                <div class="text-sm text-green-700 dark:text-green-300">Completed</div>
                            </div>
                            <div class="text-center p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg transition-colors duration-300">
                                <div class="text-2xl font-bold text-yellow-600 dark:text-yellow-400" x-text="taskStats.pending"></div>
                                <div class="text-sm text-yellow-700 dark:text-yellow-300">Pending</div>
                            </div>
                            <div class="text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg transition-colors duration-300">
                                <div class="text-2xl font-bold text-purple-600 dark:text-purple-400" x-text="completionPercentage + '%'"></div>
                                <div class="text-sm text-purple-700 dark:text-purple-300">Complete</div>
                            </div>
                        </div>
                    </section>

                    <!-- 6. Local Storage Demo -->
                    <section class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors duration-300">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2">
                            <i class="bi bi-6-circle text-indigo-500"></i>
                            Local Storage Persistence
                        </h2>
                        
                        <div class="space-y-3">
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                Your tasks and theme preference are automatically saved to browser storage and will persist between sessions.
                            </p>
                            
                            <div class="flex gap-2">
                                <button @click="saveToStorage()" 
                                        class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors duration-300">
                                    <i class="bi bi-save"></i>
                                    Save Now
                                </button>
                                <button @click="loadFromStorage()" 
                                        class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center gap-2 transition-colors duration-300">
                                    <i class="bi bi-arrow-clockwise"></i>
                                    Reload
                                </button>
                            </div>

                            <div x-show="lastSaved" class="text-xs text-gray-500 dark:text-gray-400">
                                Last saved: <span x-text="lastSaved"></span>
                            </div>
                        </div>
                    </section>

                    <!-- 7. Project Files Loader -->
                    <section class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 transition-colors duration-300">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2">
                            <i class="bi bi-7-circle text-pink-500"></i>
                            Project Files from Repository
                        </h2>
                        
                        <div class="space-y-4">
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                Dynamically load markdown files from the <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs">files/</code> directory using a manifest file.
                            </p>

                            <!-- Search Files -->
                            <div>
                                <input 
                                    type="text" 
                                    x-model="fileSearchTerm"
                                    placeholder="Search files..."
                                    class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-colors duration-300">
                            </div>

                            <!-- Loading State -->
                            <div x-show="loadingFiles" class="text-center py-4">
                                <i class="bi bi-hourglass-split text-pink-500 text-2xl animate-pulse"></i>
                                <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">Loading files...</p>
                            </div>

                            <!-- Error State -->
                            <div x-show="filesError" class="p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg">
                                <p class="text-sm text-red-700 dark:text-red-400" x-text="filesError"></p>
                                <button @click="loadFilesFromGitHub()" 
                                        class="mt-2 px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm">
                                    Retry
                                </button>
                            </div>

                            <!-- Files List -->
                            <div x-show="!loadingFiles && !filesError" class="space-y-2 max-h-64 overflow-y-auto">
                                <template x-if="filteredFiles.length === 0">
                                    <div class="text-center py-8 text-gray-500 dark:text-gray-400">
                                        <i class="bi bi-inbox text-3xl"></i>
                                        <p class="text-sm mt-2">No files found</p>
                                    </div>
                                </template>
                                
                                <template x-for="file in filteredFiles" :key="file.id">
                                    <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-300 cursor-pointer"
                                         @click="viewFile(file)">
                                        <div class="flex items-center gap-2">
                                            <i class="bi bi-file-earmark-text text-pink-500"></i>
                                            <span class="text-sm text-gray-800 dark:text-gray-200" x-text="file.name"></span>
                                        </div>
                                        <i class="bi bi-chevron-right text-gray-400"></i>
                                    </div>
                                </template>
                            </div>

                            <div class="flex gap-2">
                                <button @click="loadFilesFromGitHub()" 
                                        class="px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600 flex items-center gap-2 transition-colors duration-300">
                                    <i class="bi bi-arrow-clockwise"></i>
                                    Refresh Files
                                </button>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>

        <!-- Modal Example (Proper Scrolling) -->
        <div x-show="showModal" 
             @click="showModal = false"
             class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-8 z-50">
            <div @click.stop 
                 class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl transition-colors duration-300" 
                 style="height: 80vh">
                
                <!-- Fixed Header -->
                <div class="bg-white dark:bg-gray-800 p-6 border-b border-gray-200 dark:border-gray-700 rounded-t-lg transition-colors duration-300">
                    <div class="flex items-center justify-between">
                        <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100">About This Alpine.js Demo</h3>
                        <button @click="showModal = false" 
                                class="text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-300">
                            <i class="bi bi-x text-2xl"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Scrollable Content -->
                <div class="bg-gray-50 dark:bg-gray-900 p-6 overflow-y-scroll transition-colors duration-300" 
                     style="height: calc(80vh - 120px)">
                    
                    <div class="prose max-w-none">
                        <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4">Alpine.js Core Concepts Demonstrated</h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 transition-colors duration-300">
                                <h5 class="font-semibold text-blue-600 dark:text-blue-400 mb-2">1. Reactive Data Binding</h5>
                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                    Using <code class="bg-gray-100 dark:bg-gray-700 px-1 rounded text-gray-800 dark:text-gray-200">x-model</code> for two-way binding and 
                                    <code class="bg-gray-100 dark:bg-gray-700 px-1 rounded text-gray-800 dark:text-gray-200">x-text</code> for displaying data.
                                </p>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 transition-colors duration-300">
                                <h5 class="font-semibold text-green-600 dark:text-green-400 mb-2">2. Event Handling</h5>
                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                    Using <code class="bg-gray-100 dark:bg-gray-700 px-1 rounded text-gray-800 dark:text-gray-200">@click</code>, 
                                    <code class="bg-gray-100 dark:bg-gray-700 px-1 rounded text-gray-800 dark:text-gray-200">@submit.prevent</code>, and 
                                    <code class="bg-gray-100 dark:bg-gray-700 px-1 rounded text-gray-800 dark:text-gray-200">@change</code> for user interactions.
                                </p>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 transition-colors duration-300">
                                <h5 class="font-semibold text-purple-600 dark:text-purple-400 mb-2">3. Conditional Display</h5>
                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                    Using <code class="bg-gray-100 dark:bg-gray-700 px-1 rounded text-gray-800 dark:text-gray-200">x-show</code> and 
                                    <code class="bg-gray-100 dark:bg-gray-700 px-1 rounded text-gray-800 dark:text-gray-200">x-if</code> for showing/hiding content.
                                </p>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 transition-colors duration-300">
                                <h5 class="font-semibold text-orange-600 dark:text-orange-400 mb-2">4. Lists & Loops</h5>
                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                    Using <code class="bg-gray-100 dark:bg-gray-700 px-1 rounded text-gray-800 dark:text-gray-200">x-for</code> to render dynamic lists 
                                    with proper <code class="bg-gray-100 dark:bg-gray-700 px-1 rounded text-gray-800 dark:text-gray-200">:key</code> attributes.
                                </p>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 transition-colors duration-300">
                                <h5 class="font-semibold text-teal-600 dark:text-teal-400 mb-2">5. Computed Properties</h5>
                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                    Using getter functions for derived data that automatically updates when dependencies change.
                                </p>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 transition-colors duration-300">
                                <h5 class="font-semibold text-indigo-600 dark:text-indigo-400 mb-2">6. Local Storage</h5>
                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                    Persistent data using browser localStorage with automatic save/load functionality.
                                </p>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 transition-colors duration-300">
                                <h5 class="font-semibold text-gray-600 dark:text-gray-400 mb-2">7. Dark Mode Toggle</h5>
                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                    Accessibility-focused dark mode with system preference detection and localStorage persistence.
                                </p>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 transition-colors duration-300">
                                <h5 class="font-semibold text-pink-600 dark:text-pink-400 mb-2">8. Manifest File Loading</h5>
                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                    Dynamically load and display markdown files from a manifest (files.json), inspired by the recipe site pattern.
                                </p>
                            </div>
                        </div>

                        <div class="mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg transition-colors duration-300">
                            <h5 class="font-semibold text-blue-800 dark:text-blue-300 mb-2">üöÄ Getting Started</h5>
                            <ol class="text-sm text-blue-700 dark:text-blue-400 space-y-1 list-decimal list-inside">
                                <li>Try toggling dark mode with the button in the header</li>
                                <li>Add some tasks using the form in section 1</li>
                                <li>Try the search and filter functionality</li>
                                <li>Toggle the "Show Advanced Options" checkbox</li>
                                <li>Upload a JSON file with task data</li>
                                <li>Export your data and save it locally</li>
                                <li>Refresh the page to see persistence in action</li>
                                <li><strong>Click on files in section 7 to view markdown content from GitHub</strong></li>
                                <li><strong>Visit the <a href="dark-mode-example.html" class="underline hover:text-blue-600 dark:hover:text-blue-400">Dark Mode Example</a> for detailed implementation guide</strong></li>
                            </ol>
                        </div>

                        <div class="mt-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg transition-colors duration-300">
                            <h5 class="font-semibold text-green-800 dark:text-green-300 mb-2">üìÅ Single File Benefits</h5>
                            <ul class="text-sm text-green-700 dark:text-green-400 space-y-1 list-disc list-inside">
                                <li>No build process - just save and open</li>
                                <li>Easy to share via email or file transfer</li>
                                <li>Works offline after initial load</li>
                                <li>Perfect for internal tools and utilities</li>
                                <li>Version control friendly</li>
                                <li>Built-in accessibility features like dark mode</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- File Viewer Modal -->
        <div x-show="showFileModal" 
             @click="showFileModal = false"
             class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-8 z-50">
            <div @click.stop 
                 class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl transition-colors duration-300" 
                 style="height: 80vh">
                
                <!-- Fixed Header -->
                <div class="bg-white dark:bg-gray-800 p-6 border-b border-gray-200 dark:border-gray-700 rounded-t-lg transition-colors duration-300">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100" x-text="selectedFile?.name"></h3>
                            <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                                <i class="bi bi-file-earmark-text"></i>
                                Loaded from repository
                            </p>
                        </div>
                        <button @click="showFileModal = false" 
                                class="text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-300">
                            <i class="bi bi-x text-2xl"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Scrollable Content -->
                <div class="bg-gray-50 dark:bg-gray-900 p-6 overflow-y-scroll transition-colors duration-300" 
                     style="height: calc(80vh - 120px)">
                    
                    <!-- Rendered Markdown Content -->
                    <div class="prose prose-sm max-w-none 
                                prose-headings:text-gray-800 dark:prose-headings:text-gray-100
                                prose-p:text-gray-700 dark:prose-p:text-gray-300
                                prose-a:text-blue-600 dark:prose-a:text-blue-400
                                prose-strong:text-gray-900 dark:prose-strong:text-gray-100
                                prose-code:text-pink-600 dark:prose-code:text-pink-400
                                prose-code:bg-gray-100 dark:prose-code:bg-gray-800
                                prose-code:px-1 prose-code:py-0.5 prose-code:rounded
                                prose-pre:bg-gray-800 dark:prose-pre:bg-gray-900
                                prose-pre:text-gray-100
                                prose-li:text-gray-700 dark:prose-li:text-gray-300
                                prose-ul:text-gray-700 dark:prose-ul:text-gray-300
                                prose-ol:text-gray-700 dark:prose-ol:text-gray-300"
                         x-html="selectedFile?.html">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function starterApp() {
            return {
                // === STATE ===
                userName: '',
                newTask: { title: '', priority: '' },
                tasks: [],
                errors: {},
                filter: 'all',
                searchTerm: '',
                showAdvanced: false,
                showModal: false,
                uploadStatus: '',
                lastSaved: null,
                darkMode: false,
                
                // File loading state
                files: [],
                loadingFiles: false,
                filesError: null,
                selectedFile: null,
                showFileModal: false,
                fileSearchTerm: '',

                // === COMPUTED PROPERTIES ===
                get filteredTasks() {
                    let filtered = this.tasks;
                    
                    // Apply status filter
                    if (this.filter === 'pending') {
                        filtered = filtered.filter(task => !task.completed);
                    } else if (this.filter === 'completed') {
                        filtered = filtered.filter(task => task.completed);
                    }
                    
                    // Apply search filter
                    if (this.searchTerm) {
                        filtered = filtered.filter(task => 
                            task.title.toLowerCase().includes(this.searchTerm.toLowerCase())
                        );
                    }
                    
                    return filtered;
                },

                get activeTasks() {
                    return this.tasks.filter(task => !task.completed).length;
                },

                get completedTasks() {
                    return this.tasks.filter(task => task.completed).length;
                },

                get taskStats() {
                    return {
                        total: this.tasks.length,
                        completed: this.completedTasks,
                        pending: this.activeTasks
                    };
                },

                get completionPercentage() {
                    if (this.tasks.length === 0) return 0;
                    return Math.round((this.completedTasks / this.tasks.length) * 100);
                },
                
                get filteredFiles() {
                    if (!this.fileSearchTerm) return this.files;
                    return this.files.filter(file => 
                        file.name.toLowerCase().includes(this.fileSearchTerm.toLowerCase())
                    );
                },

                // === METHODS ===
                init() {
                    // Load saved data on startup
                    this.loadFromStorage();
                    
                    // Load dark mode preference from localStorage
                    const savedDarkMode = localStorage.getItem('alpine-starter-darkMode');
                    this.darkMode = savedDarkMode === 'true';
                    this.updateDarkMode();
                    
                    // Add some sample data if none exists
                    if (this.tasks.length === 0) {
                        this.addSampleData();
                    }
                    
                    // Load files from GitHub
                    this.loadFilesFromGitHub();
                },

                toggleDarkMode() {
                    this.darkMode = !this.darkMode;
                    this.updateDarkMode();
                    localStorage.setItem('alpine-starter-darkMode', this.darkMode.toString());
                },

                updateDarkMode() {
                    if (this.darkMode) {
                        document.documentElement.classList.add('dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                    }
                },

                addSampleData() {
                    this.tasks = [
                        { id: 1, title: 'Learn Alpine.js basics', priority: 'high', completed: true },
                        { id: 2, title: 'Build a todo app', priority: 'medium', completed: false },
                        { id: 3, title: 'Add file upload feature', priority: 'low', completed: false },
                        { id: 4, title: 'Implement local storage', priority: 'medium', completed: true }
                    ];
                    this.saveToStorage();
                },

                validateTask() {
                    this.errors = {};
                    
                    if (!this.newTask.title.trim()) {
                        this.errors.title = 'Task title is required';
                    }
                    
                    return Object.keys(this.errors).length === 0;
                },

                addTask() {
                    if (!this.validateTask()) return;
                    
                    const task = {
                        id: Date.now(),
                        title: this.newTask.title.trim(),
                        priority: this.newTask.priority || 'medium',
                        completed: false
                    };
                    
                    this.tasks.push(task);
                    this.newTask = { title: '', priority: '' };
                    this.saveToStorage();
                },

                removeTask(id) {
                    this.tasks = this.tasks.filter(task => task.id !== id);
                    this.saveToStorage();
                },

                async handleFileUpload(event) {
                    const file = event.target.files[0];
                    if (!file) return;
                    
                    try {
                        const text = await file.text();
                        
                        if (file.name.endsWith('.json')) {
                            const data = JSON.parse(text);
                            
                            // Validate the structure
                            if (Array.isArray(data) && data.every(item => 
                                item.hasOwnProperty('title') && 
                                item.hasOwnProperty('completed')
                            )) {
                                // Add IDs if missing and merge with existing tasks
                                const newTasks = data.map(task => ({
                                    id: task.id || Date.now() + Math.random(),
                                    title: task.title,
                                    priority: task.priority || 'medium',
                                    completed: task.completed || false
                                }));
                                
                                this.tasks = [...this.tasks, ...newTasks];
                                this.uploadStatus = `Successfully imported ${newTasks.length} tasks from ${file.name}`;
                                this.saveToStorage();
                            } else {
                                this.uploadStatus = 'Error: Invalid task data format in JSON file';
                            }
                        } else {
                            this.uploadStatus = 'Error: Please upload a JSON file';
                        }
                    } catch (error) {
                        this.uploadStatus = `Error: Could not parse file - ${error.message}`;
                    }
                    
                    // Clear status after 5 seconds
                    setTimeout(() => {
                        this.uploadStatus = '';
                    }, 5000);
                    
                    // Clear the file input
                    event.target.value = '';
                },

                exportData() {
                    const dataStr = JSON.stringify(this.tasks, null, 2);
                    const blob = new Blob([dataStr], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `alpine-tasks-${new Date().toISOString().split('T')[0]}.json`;
                    a.click();
                    
                    URL.revokeObjectURL(url);
                },

                async copyToClipboard(text) {
                    try {
                        await navigator.clipboard.writeText(text);
                        alert('Copied to clipboard!');
                    } catch (err) {
                        // Fallback for older browsers
                        const textarea = document.createElement('textarea');
                        textarea.value = text;
                        textarea.style.position = 'fixed';
                        textarea.style.opacity = '0';
                        document.body.appendChild(textarea);
                        textarea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textarea);
                        alert('Copied to clipboard!');
                    }
                },

                saveToStorage() {
                    localStorage.setItem('alpine-starter-tasks', JSON.stringify(this.tasks));
                    localStorage.setItem('alpine-starter-user', this.userName);
                    localStorage.setItem('alpine-starter-darkMode', this.darkMode.toString());
                    this.lastSaved = new Date().toLocaleTimeString();
                },

                loadFromStorage() {
                    const savedTasks = localStorage.getItem('alpine-starter-tasks');
                    const savedUser = localStorage.getItem('alpine-starter-user');
                    const savedDarkMode = localStorage.getItem('alpine-starter-darkMode');
                    
                    if (savedTasks) {
                        try {
                            this.tasks = JSON.parse(savedTasks);
                        } catch (error) {
                            console.error('Error parsing saved tasks:', error);
                        }
                    }
                    
                    if (savedUser) {
                        this.userName = savedUser;
                    }
                    
                    if (savedDarkMode) {
                        this.darkMode = savedDarkMode === 'true';
                    }
                },

                clearAllData() {
                    if (confirm('Are you sure you want to clear all data? This cannot be undone.')) {
                        this.tasks = [];
                        this.userName = '';
                        this.newTask = { title: '', priority: '' };
                        this.filter = 'all';
                        this.searchTerm = '';
                        this.showAdvanced = false;
                        localStorage.removeItem('alpine-starter-tasks');
                        localStorage.removeItem('alpine-starter-user');
                        // Keep dark mode preference when clearing data
                        this.lastSaved = null;
                    }
                },
                
                // === FILE LOADING METHODS ===
                async loadFilesFromGitHub() {
                    this.loadingFiles = true;
                    this.filesError = null;
                    
                    try {
                        // Load file list from manifest (like recipe site pattern)
                        let fileList = [];
                        try {
                            const manifestResponse = await fetch('files.json');
                            if (manifestResponse.ok) {
                                fileList = await manifestResponse.json();
                            }
                        } catch (error) {
                            console.warn('Could not load files manifest, using fallback list:', error);
                            // Fallback to known files if manifest fails
                            fileList = [
                                'example-01.md',
                                'example-02.md',
                                'example-03.md'
                            ];
                        }
                        
                        // Map filenames to file objects
                        this.files = fileList
                            .filter(filename => filename.endsWith('.md'))
                            .map(filename => ({
                                name: filename,
                                path: `files/${filename}`,
                                id: filename.replace('.md', '')
                            }));
                        
                    } catch (error) {
                        console.error('Error loading files:', error);
                        this.filesError = error.message;
                    } finally {
                        this.loadingFiles = false;
                    }
                },
                
                async viewFile(file) {
                    this.loadingFiles = true;
                    
                    try {
                        // Fetch markdown file from files/ directory
                        const response = await fetch(file.path);
                        
                        if (!response.ok) {
                            throw new Error('Failed to load file content');
                        }
                        
                        const markdown = await response.text();
                        
                        // Parse markdown to HTML using marked.js
                        const htmlContent = marked.parse(markdown);
                        
                        this.selectedFile = {
                            ...file,
                            markdown: markdown,
                            html: htmlContent
                        };
                        
                        this.showFileModal = true;
                        
                    } catch (error) {
                        console.error('Error loading file content:', error);
                        alert('Failed to load file: ' + error.message);
                    } finally {
                        this.loadingFiles = false;
                    }
                }
            }
        }
    </script>

    <!-- PWA Functionality -->
    <script>
        // Listen for PWA install prompt
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('PWA Install prompt available!');
            // Optionally, you can store the event and show a custom install button
            // e.preventDefault();
            // window.deferredPrompt = e;
        });

        const iconSize = 192;

        // Dynamically created manifest
        const manifest = {
            name: 'Alpine.js Starter Demo',
            short_name: 'Alpine Demo',
            display: 'standalone',
            theme_color: '#3b82f6',
            background_color: '#f9fafb',
            start_url: window.location.href,
            // PNG icon will be converted from SVG
        };

        // Convert the SVG favicon to PNG for platforms that don't support SVG
        // (Safari and Firefox on Android)
        (async function() {
            const svgIconLink = document.querySelector('link[rel="icon"]');

            // Convert from SVG string to PNG data URL
            const pngDataUrl = await svgToPng(svgIconLink.href, iconSize);

            // Set the icon meta tags to the new PNG
            setIcon("link[rel='icon']", pngDataUrl, iconSize);
            setIcon("link[rel='apple-touch-icon']", pngDataUrl);

            // Dynamically create manifest
            manifest.icons = [{
                src: pngDataUrl,
                sizes: `${iconSize}x${iconSize}`,
                type: 'image/png'
            }];

            // Set the manifest meta tag data url
            setManifest(manifest);

            // Generate and set the iOS startup image
            const startupImageDataUrl = await createStartupImage(
                svgIconLink.href,
                manifest.background_color
            );
            const startupLink = document.createElement('link');
            startupLink.rel = 'apple-touch-startup-image';
            startupLink.href = startupImageDataUrl;
            document.head.appendChild(startupLink);
        })();

        function setManifest(manifest) {
            const link = document.createElement('link');
            link.rel = 'manifest';
            const b64manifest = btoa(JSON.stringify(manifest));
            link.href = "data:application/json;base64," + b64manifest;
            document.head.appendChild(link);
        }

        function setIcon(query, iconurl, size) {
            const iconLink = document.querySelector(query);
            iconLink.href = iconurl;
            iconLink.type = 'image/png';
            if (size) {
                iconLink.setAttribute('sizes', `${size}x${size}`);
            }
        }

        function svgToPng(svgDataUrl, size) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    canvas.width = size;
                    canvas.height = size;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0, size, size);
                    const pngDataUrl = canvas.toDataURL('image/png');
                    resolve(pngDataUrl);
                };
                img.onerror = reject;
                img.src = svgDataUrl;
            });
        }

        // Safari needs a startup image
        function createStartupImage(svgDataUrl, bgColor) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.onload = () => {
                    const dpr = window.devicePixelRatio || 1;
                    const canvas = document.createElement('canvas');
                    canvas.width = window.screen.width * dpr;
                    canvas.height = window.screen.height * dpr;
                    const ctx = canvas.getContext('2d');

                    ctx.fillStyle = bgColor;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);

                    const iconDisplaySize = canvas.width * 0.25;
                    const x = (canvas.width - iconDisplaySize) / 2;
                    const y = (canvas.height - iconDisplaySize) / 2;
                    ctx.drawImage(img, x, y, iconDisplaySize, iconDisplaySize);

                    resolve(canvas.toDataURL('image/png'));
                };
                img.onerror = reject;
                img.src = svgDataUrl;
            });
        }
    </script>
</body>
</html>
